{"ast":null,"code":"var _jsxFileName = \"/Users/omer/Downloads/check-digit/src/containers/Form/Form.js\";\nimport React, { useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Form as LibForm } from 'semantic-ui-react';\nimport { inputs } from '../../config';\nimport actions from '../../redux/actions';\nimport { selectNums, selectErrors } from '../../redux/selectors';\nimport { validateNum } from '../../utils/validates';\nimport { FormInput } from '../../components/FormInput/FormInput';\nimport { Wrapper } from './Form.style';\nconst Group = LibForm.Group;\n\nconst Form = () => {\n  const refs = {\n    num1: useRef(null),\n    num2: useRef(null),\n    num3: useRef(null),\n    num4: useRef(null),\n    num5: useRef(null),\n    num6: useRef(null),\n    num7: useRef(null),\n    num8: useRef(null)\n  };\n  const dispatch = useDispatch();\n  const nums = useSelector(selectNums);\n  const errors = useSelector(selectErrors);\n\n  const goNext = (name, value) => {\n    const num = Number(name.replace('num', ''));\n    const prevNum = num > 1 ? num - 1 : 1;\n    const nextNum = num < 8 ? num + 1 : 8;\n    const nextName = value ? \"num\".concat(nextNum) : \"num\".concat(prevNum);\n    refs[nextName].current.focus();\n  };\n\n  const onChange = ({\n    target\n  }) => {\n    const name = target.name,\n          value = target.value;\n    const resValue = value && value.length > 0 ? value.split('').reverse()[0] : '';\n    dispatch(actions.changeErr(name, ''));\n    dispatch(actions.changeNum(name, resValue));\n\n    if (resValue) {\n      const error = validateNum(resValue);\n\n      if (error) {\n        dispatch(actions.changeErr(name, error));\n        return;\n      }\n    }\n\n    goNext(name, value);\n  };\n\n  const onKeyDown = ({\n    target,\n    keyCode\n  }) => {\n    if (keyCode !== 8) {\n      return;\n    }\n\n    const name = target.name;\n\n    if (!nums[name]) {\n      goNext(name, false);\n    }\n  };\n\n  const formInputs = inputs.map(i => {\n    const name = \"num\".concat(i);\n    return React.createElement(FormInput, {\n      ref: refs[name],\n      key: name,\n      name: name,\n      value: nums[name],\n      error: errors[name],\n      onChange: onChange,\n      onKeyDown: onKeyDown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    });\n  });\n  return React.createElement(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(LibForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Group, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, formInputs)));\n};\n\nexport default Form;","map":{"version":3,"sources":["/Users/omer/Downloads/check-digit/src/containers/Form/Form.js"],"names":["React","useRef","useSelector","useDispatch","Form","LibForm","inputs","actions","selectNums","selectErrors","validateNum","FormInput","Wrapper","Group","refs","num1","num2","num3","num4","num5","num6","num7","num8","dispatch","nums","errors","goNext","name","value","num","Number","replace","prevNum","nextNum","nextName","current","focus","onChange","target","resValue","length","split","reverse","changeErr","changeNum","error","onKeyDown","keyCode","formInputs","map","i"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Form as LibForm } from 'semantic-ui-react';\n\nimport { inputs } from '../../config';\nimport actions from '../../redux/actions';\nimport { selectNums, selectErrors } from '../../redux/selectors';\nimport { validateNum } from '../../utils/validates';\n\nimport { FormInput } from '../../components/FormInput/FormInput';\nimport { Wrapper } from './Form.style';\n\nconst { Group } = LibForm;\n\nconst Form = () => {\n\n\tconst refs = {\n\t\tnum1: useRef(null),\n\t\tnum2: useRef(null),\n\t\tnum3: useRef(null),\n\t\tnum4: useRef(null),\n\t\tnum5: useRef(null),\n\t\tnum6: useRef(null),\n\t\tnum7: useRef(null),\n\t\tnum8: useRef(null),\n\t}\n\n\tconst dispatch = useDispatch();\n\tconst nums = useSelector(selectNums);\n\tconst errors = useSelector(selectErrors);\n\n\tconst goNext = (name, value) => {\n\t\tconst num = Number(name.replace('num', ''));\n\t\tconst prevNum = (num > 1) ? num - 1 : 1;\n\t\tconst nextNum = (num < 8) ? num + 1 : 8;\n\n\t\tconst nextName = value ? `num${nextNum}` : `num${prevNum}`;\n\t\trefs[nextName].current.focus();\n\t};\n\n\tconst onChange = ({ target }) => {\n\t\tconst { name, value } = target;\n\n\t\tconst resValue = (value && value.length > 0) ? value.split('').reverse()[0] : '';\n\t\tdispatch(actions.changeErr(name, ''));\n\t\tdispatch(actions.changeNum(name, resValue));\n\n\t\tif (resValue) {\n\t\t\tconst error = validateNum(resValue);\n\t\t\tif (error) {\n\t\t\t\tdispatch(actions.changeErr(name, error));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tgoNext(name, value);\n\t};\n\n\tconst onKeyDown = ( { target, keyCode }) => {\n\t\tif (keyCode !== 8) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { name } = target;\n\t\tif (!nums[name]) {\n\t\t\tgoNext(name, false);\n\t\t}\n\t}\n\n\tconst formInputs = inputs.map(i => {\n\t\tconst name = `num${i}`;\n\t\treturn (\n\t\t\t<FormInput\n\t\t\t\tref={refs[name]}\n\t\t\t\tkey={name}\n\t\t\t\tname={name}\n\t\t\t\tvalue={nums[name]}\n\t\t\t\terror={errors[name]}\n\t\t\t\tonChange={onChange}\n\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t/>\n\t\t);\n\t});\n\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LibForm>\n\t\t\t\t<Group>\n\t\t\t\t\t{formInputs}\n\t\t\t\t</Group>\n\t\t</LibForm>\n\t\t</Wrapper>\n\t);\n};\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}